# Binary Exploitation

What is dat thing? 

The objective is to exploit the binary on certain functions to obtain flag / shell.


# Register

Register is a location which data is stored.

Reserved Register:

    x64: RIP (Instruction pointer) & RSP (Stack Pointer)

What is the difference between x64 and x86?
the sizes of the register.

- RAX = x64 (64 bit)
- EAX = x86 (32 bit)
- AX = (16 bit)
- AL = (8 bit)

# Stack

What is stack? the opposite of Queue.

Lets say there is a number like this.

    [1,2,3,4]

Then 5 will come into the array, which number will be called first with stack concept?

    [1,2,3,4,5]

    call: 1?

    call: 5?


# Binary Security






# Ret2Libc
## Finding libc file

`ldd [binary]`

```
ldd vuln-64 
        linux-vdso.so.1 (0x00007ffcfa726000)
        libc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 (0x00007fa4699bc000)
        /lib64/ld-linux-x86-64.so.2 (0x00007fa469bbc000)

```

## Patching binary

If the challenge provide the libc.so.6 or ld files you could patch the binary with `pwninit` and `patchelf`

- Install patchelf (`apt-get install patchelf`)
- Download pwninit (https://github.com/io12/pwninit/releases)

Patch with `/opt/pwninit --bin [binary] --libc [libc.so.6] --ld [ld file]`

## Find leak(s)

- Search usable GOT and PLT
- Calculate the offset of the leaked GOT (leak - libc.symbols["puts"]) and set `libc.address`
- Find the str_bin_sh and system
- Recheck the address with `pause()` and `x/s [address]`
  - libc base address: ELF
- Return to main again to send the attack payload `padding + ret + bin_sh + system`
